/*! SCIA 2014-04-16 */
!function(a){var b={};b.head=document.getElementsByTagName("head")[0],b.Sidebar={$sidebar:null,$wrapper:null,windowDimensions:null,baseTemplate:function(){var a="";return a+="<div id='sidebar-close'></div>",a+="<div id='sidebar-mainWrapper'></div>"},init:function(a,c){var d=this;d.windowDimensions=b.utils.getWindowSize();var e=d.windowDimensions;if(""!==a&&null!==a&&""!==c&&null!==c){d.$wrapper=$("#"+a);{d.$wrapper}d.$sidebar=$("#"+c);var f=d.$sidebar;f.css("height",e.height),f.on("click","#sidebar-close",function(){d._hide()})}},_expose:function(a){{var c=this,d=-(.2*c.windowDimensions.width);.2*c.windowDimensions.width}c.$wrapper.animate({left:d},350,function(){}),c.$sidebar.animate({right:0},350,function(){a&&a()}),b.utils.disable_scroll()},_hide:function(a){var c=this;c.$wrapper.animate({left:0},350,function(){}),c.$sidebar.animate({right:-300},350,function(){a&&a()}),b.utils.enable_scroll()},_renderBase:function(){var a=this,b=a.$sidebar,c="";return c+="<div id='sidebar-close'></div>",c+="<div id='sidebar-mainWrapper'></div>",b.empty().html(c),$("#sidebar-mainWrapper")},renderHandlerbars:function(){var a=this,b=a.$sidebar,c=Handlebars.compile(a.baseTemplate()),d=c();b.empty().html(d)},login:{display:function(){var a=this;a._render(),b.Sidebar._expose()},_render:function(){var a="",c=b.Sidebar._renderBase();a+="<div id='sidebar-login'>",a+="<div id='sidebar-login-error' class='sidebar-error'></div>",a+="<div class='sidebar-input-wrapper'>",a+="<label class='sidbar-label' for='LoginEmail'>Email</label>",a+="<input id='sidebar-loginEmail' class='sidebar-input' type='email' name='LoginEmail' value='' tabindex='1' />",a+="</div>",a+="<div class='sidebar-input-wrapper'>",a+="<label class='sidbar-label' for='LoginPassword'>Password</label>",a+="<input id='sidebar-loginPassword' class='sidebar-input' type='password' name='LoginPassword' value='' tabindex='2' />",a+="</div>",a+="<div id='sidebar-login' class='sidebar-button large-button' onclick='SCIA.Sidebar.login.submit(this)'>login</div>",a+="<a class='sidebar-ui-link' href=''>Forgot Password?</a>",a+="</div>",c.html(a)},submit:function(){var a=$("#sidebar-loginEmail").val(),c=$("#sidebar-loginPassword").val();$.post("/d1/user/login",{email:a,pwd:c},function(a){0===a.status?b.Sidebar._hide(function(){location.reload()}):10402==a.status?$("#sidebar-login-error").empty().html("This email isn't registered"):10050==a.status&&$("#sidebar-login-error").empty().html("Invalid password")})}}},b.ZuneView={zuneCards:[],init:function(a,b){function d(a){return String.fromCharCode(a.charCodeAt(0)+1)}function e(a,b,c){var d=document.createElement("div"),e=document.createElement("div"),g=document.createElement("div"),h=document.createElement("div"),j=document.createElement("img"),k=document.createElement("img"),l=a*i.width;d.className="flip-container",d.style.width=l,d.style.height=l,d.style.top=c,d.style.left=b,e.className="flipper",g.className="front",h.className="back",j.className="imgFront zuneImg",j.width=l-5,j.height=l-5,j.src=f.getRandomImg(),k.className="imgBack zuneImg",k.width=l-5,k.height=l-5,k.src=f.getRandomImg(),g.appendChild(j),h.appendChild(k),e.appendChild(g),e.appendChild(h),d.appendChild(e);var m=new f.ZuneCard(d,j,k);return f.zuneCards.push(m),d}var f=this,g=document.getElementById(b),h={width:g.clientWidth,height:g.clientHeight},i={width:h.height/a.height,height:h.height/a.height},j="A",k=0,l=0,m=null;a.width=Math.floor(h.width/i.width);var n=0,o=new Array(a.width);for(c=0;c<a.width;c++)o[c]=new Array(a.height);var p=!0;for(document.getElementById("wrapper").style.width=a.width*i.width+"px",r=0;r<a.height;r++)for(c=0;c<a.width;c++)if(void 0===o[c][r]){var q=Math.floor(4*Math.random())+2,s=c,t=r,u=0;for(p&&(q=2);q>u&&s<a.width&&void 0===o[s][r]&&t<a.height;)u++,s++,t++;for(s=c;c+u>s;s++)for(t=r;r+u>t;t++)o[s][t]=j;if(k=c*i.width+n,l=r*i.height,m=new e(u,k,l),p){var v=f.zuneCards[0];v.imgFront.src="../assets/images/logo.png",v.imgBack.src="../assets/images/logo.png",f.zuneCards=[],p=!1}g.appendChild(m),j=d(j)}setInterval(function(){f.updateZuneImgs()},5e3)},getRandomImg:function(){var a=Math.floor(47*Math.random());return"../assets/images/"+a+".jpg"},updateZuneImgs:function(){var a=Math.floor(Math.random()*this.zuneCards.length),b=this.zuneCards[a],c=this;b.frontVisible?b.imgBack.src=c.getRandomImg():b.imgFront.src=c.getRandomImg(),b.frontVisible=!b.frontVisible,b.flipContainer.classList.toggle("flip")},ZuneCard:function(a,b,c){return{flipContainer:a,imgFront:b,imgBack:c,frontVisible:!0}}},b.utils={keys:[37,38,39,40],preventDefault:function(b){b=b||a.event,b.preventDefault&&b.preventDefault(),b.returnValue=!1},keydown:function(a){for(var c=b.utils,d=c.keys,e=d.length;e--;)if(a.keyCode===d[e])return void preventDefault(a)},wheel:function(a){var c=b.utils;c.preventDefault(a)},disable_scroll:function(){var c=(b.utils,this.wheel),d=this.keydown;a.addEventListener&&a.addEventListener("DOMMouseScroll",c,!1),a.onmousewheel=document.onmousewheel=c,document.onkeydown=d},enable_scroll:function(){var c=(b.utils,this.wheel);a.removeEventListener&&a.removeEventListener("DOMMouseScroll",c,!1),a.onmousewheel=document.onmousewheel=document.onkeydown=null},getWindowSize:function(){return{width:a.innerWidth,height:a.innerHeight}},getGCD:function(a,b){for(var c=-1,d=0,e=0;0!==c;)d=a>b?a:b,e=a>b?b:a,c=d%e,a>b?a=c:b=c;return e}},"object"==typeof a&&(a.SCIA=a.SC=b)}(window);