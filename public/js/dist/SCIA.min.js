/*! SCIA 2014-04-30 */
!function(a){var b={},d=b;b.head=document.getElementsByTagName("head")[0],function(){for(var b=0,c=["ms","moz","webkit","o"],d=0;d<c.length&&!a.requestAnimationFrame;++d)a.requestAnimationFrame=a[c[d]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[c[d]+"CancelAnimationFrame"]||a[c[d]+"CancelRequestAnimationFrame"];a.requestAnimationFrame||(a.requestAnimationFrame=function(c){var d=(new Date).getTime(),e=Math.max(0,16-(d-b)),f=a.setTimeout(function(){c(d+e)},e);return b=d+e,f}),a.cancelAnimationFrame||(a.cancelAnimationFrame=function(a){clearTimeout(a)})}(),b.core={init:function(){Stripe.setPublishableKey("pk_test_HvH0HNcaXzQcAPN8wruR6JXU");var a=d.utils.parseQueryString();if("recover"==a.action){var b=a.id,c=a.token;d.Sidebar.reset_password.display(b,c)}else"verified"==a.action&&d.Flash("Thanks for verifying your account!")}},b.logout=function(){console.log("did?"),$.post("/d1/user/logout",function(c){0===c.status?a.location=a.location.origin+a.location.pathname:b.Flash(c.short_message)})},b.Flash=function(a){var c=b.utils.getWindowSize(),d="<div id='scia-flash-message'>"+a+"</div>";$("body").append(d);var e=$("#scia-flash-message");e.css({display:"inline-block"});var f=e.width(),g=(c.width-f)/2;e.css({position:"absolute",top:"35px",left:g,"padding-left":"50px","padding-right":"50px","text-align":"center",background:"red","line-height":"25px","font-size":"14px"}),setTimeout(function(){e.remove()},5e3)},b.Sidebar={$sidebar:null,$sidebarLoading:null,$wrapper:null,windowDimensions:null,isVisible:!1,_transactionInFlight:!1,loadingImgAsset:"",refreshOnClose:!1,init:function(a,c,d){var e=this;e.windowDimensions=b.utils.getWindowSize();var f=e.windowDimensions;if(""!==a&&null!==a&&""!==c&&null!==c&&""!==d&&null!==d){e.$wrapper=$("#"+a);{e.$wrapper}e.$sidebar=$("#"+c);var g=e.$sidebar;e.loadingImgAsset=d,g.css("height",f.height),g.on("click","#sidebar-close",function(){e._hide()}),console.log(a),$(document).keyup(function(a){27==a.keyCode&&e._hide()})}},_expose:function(a){var c=this,d=-(.2*c.windowDimensions.width),e=(.2*c.windowDimensions.width,$("#sidebar-mainWrapper").height()),f=(c.windowDimensions.height-e)/3;$("#sidebar-mainWrapper").css({top:f}),c.isVisible&&a&&a(),c.$wrapper.animate({left:d},350,function(){}),c.$sidebar.animate({right:0},350,function(){c.isVisible=!0,a&&a()}),b.utils.disable_scroll()},_hide:function(c){var d=this;d.isVisible||c&&c(),d.$wrapper.animate({left:0},350,function(){}),d.$sidebar.animate({right:-400},350,function(){d.isVisible=!1,c&&c(),d.refreshOnClose&&(a.location=a.location.origin+a.location.pathname)}),b.utils.enable_scroll()},_renderBase:function(){var a=this,b=a.$sidebar,c=a.loadingImgAsset,d="";return d+="<div id='sidebar-close'></div>",d+="<div id='sidebar-loading-wrapper'>",d+="<img id='sidebar-loading-icon' src='"+c+"' width='50' height='50'/>",d+="</div>",d+="<div id='sidebar-mainWrapper'></div>",b.empty().html(d),$("#sidebar-mainWrapper")},_beginTransaction:function(){var a=this;return a._transactionInFlight?!1:(a._transactionInFlight=!0,$("#sidebar-loading-wrapper").show().animate({opacity:1},300,function(){}),!0)},_endTransaction:function(){var a=this;a._transactionInFlight=!1,$("#sidebar-loading-wrapper").hide(),$("#sidebar-loading-wrapper").css({opacity:0})}},b.Sidebar.forgot_password={display:function(){this._render(),b.Sidebar._expose()},_render:function(){var a="",c=b.Sidebar._renderBase();a+="<div>",a+="<div id='sidebar-fgPwd-error' class='sidebar-error'></div>",a+="<div class='sidebar-input-wrapper'>",a+="<label class='sidebar-label' for='LoginEmail'>Registered Email</label>",a+="<input id='sidebar-fgPwd-email' class='sidebar-input' type='email' name='LoginEmail' tabindex='1' />",a+="</div>",a+="<div class='sidebar-button large-button' onclick='SCIA.Sidebar.forgot_password.submit(this)'>Send Email</div>",a+="</div>",c.html(a)},_renderSuccess:function(){var a="",c=b.Sidebar._renderBase();a+="<div class='sidebar-error'>Awesome, you're almost there!<br/>Check your email for further instructions</div>",c.html(a),b.Sidebar._expose()},submit:function(){var c=this,d=$("#sidebar-fgPwd-email").val(),e=a.location.origin+a.location.pathname,f="/d1/user/recover?email="+d+"&cb="+e;b.Sidebar._beginTransaction()&&$.get(f,function(a){b.Sidebar._endTransaction(),0===a.status?c._renderSuccess():10402==a.status&&$("#sidebar-fgPwd-error").empty().html("This email isn't registered")})}},b.Sidebar.login={display:function(){this._render(),b.Sidebar._expose()},_render:function(){var a="",c=b.Sidebar._renderBase();a+="<div>",a+="<div id='sidebar-login-error' class='sidebar-error'></div>",a+="<div class='sidebar-input-wrapper'>",a+="<label class='sidebar-label' for='LoginEmail'>Email</label>",a+="<input id='sidebar-loginEmail' class='sidebar-input' type='email' name='LoginEmail' value='' tabindex='1' />",a+="</div>",a+="<div class='sidebar-input-wrapper'>",a+="<label class='sidebar-label' for='LoginPassword'>Password</label>",a+="<input id='sidebar-loginPassword' class='sidebar-input' type='password' name='LoginPassword' value='' tabindex='2' />",a+="</div>",a+="<div class='sidebar-button large-button' onclick='SCIA.Sidebar.login.submit(this)'>login</div>",a+="<a class='sidebar-ui-link' href='javascript:SC.Sidebar.forgot_password.display()'>Forgot Password?</a>",a+="</div>",c.html(a)},submit:function(){var c=$("#sidebar-loginEmail").val(),d=$("#sidebar-loginPassword").val();b.Sidebar._beginTransaction()&&$.post("/d1/user/login",{email:c,pwd:d},function(d){b.Sidebar._endTransaction(),0===d.status?b.Sidebar._hide(function(){a.location=a.location.origin+a.location.pathname}):10402==d.status?$("#sidebar-login-error").empty().html("This email isn't registered"):10050==d.status?$("#sidebar-login-error").empty().html("Invalid password"):10051==d.status&&$("#sidebar-login-error").empty().html("This account hasn't been verified<br/><a class='sidebar-ui-link' href=\"javascript:SC.Sidebar.resend_verification_email._submit('"+c+"')\">Resend verification email?</a>")})}},b.Sidebar.purchase_event_ticket={ticketPrice:-1,isMember:!1,eventID:"",ticketType:"",display:function(a,c,d){var e=this;a&&c&&d&&(e.isMember="Member"===a?!0:!1,e.eventID=c,e.ticketPrice=d,e.ticketType=a,e._render(),b.Sidebar._expose())},_render:function(){var a=this,c="",d=b.Sidebar._renderBase(),e=(1.029*parseInt(a.ticketPrice,10)+.3).toFixed(2);console.log(a.isMember),c+="<div>",c+="<div id='sidebar-buyEVT-error' class='sidebar-error'>"+a.ticketType+" ticket Price: $"+e+"</div>",c+="<div class='sidebar-input-wrapper'>",c+="<label class='sidebar-label'>Name on card</label>",c+="<input id='sidebar-buyEVT-nameOnCard' class='sidebar-input' type='text' tabindex='1' />",c+="</div>",c+="<div class='sidebar-input-wrapper'>",c+="<label class='sidebar-label'>Card number</label>",c+="<div>",c+="<input id='sidebar-buyEVT-cSection1' class='sidebar-input element-25' type='text' maxlength='4' tabindex='2' />",c+="<input id='sidebar-buyEVT-cSection2' class='sidebar-input element-25' type='text' maxlength='4' tabindex='3' />",c+="<input id='sidebar-buyEVT-cSection3' class='sidebar-input element-25' type='text' maxlength='4' tabindex='4' />",c+="<input id='sidebar-buyEVT-cSection4' class='sidebar-input element-25' type='text' maxlength='4' tabindex='5' />",c+="<div class='clear'></div>",c+="</div>",c+="</div>",c+="<div>",c+="<div class='sidebar-input-wrapper element-50'>",c+="<label class='sidebar-label'>EXP <span class='sidebar-label-smaller'>(MM/YY)</span></label>",c+="<input id='sidebar-buyEVT-exp' class='sidebar-input' type='text' tabindex='6' />",c+="</div>",a.isMember?(c+="<div class='sidebar-input-wrapper element-50'>",c+="<label class='sidebar-label'>CVC</label>",c+="<input id='sidebar-buyEVT-cvc' class='sidebar-input' tabindex='7' />",c+="</div>"):(c+="<div>",c+="<div class='sidebar-input-wrapper element-25 no-pad'>",c+="<label class='sidebar-label'>CVC</label>",c+="<input id='sidebar-buyEVT-cvc' class='sidebar-input' tabindex='7' />",c+="</div>",c+="<div class='sidebar-input-wrapper element-25 no-pad'>",c+="<label class='sidebar-label'>Quantity</label>",c+="<input id='sidebar-buyEVT-quantity' class='sidebar-input' type='text' value='1' tabindex='8' />",c+="</div>",c+="<div class='clear'></div>",c+="</div>"),c+="<div class='clear'></div>",c+="</div>",c+="<div class='sidebar-button large-button' onclick='SCIA.Sidebar.purchase_event_ticket.submit(this)'>Buy Ticket</div>",c+="</div>",d.html(c)},_renderSuccess:function(){var a="",c=b.Sidebar._renderBase();a+="<div class='sidebar-error'>Welcome to the SCIA family!<br/>We'll be sending you an email shortly with your receipt.</div>",c.html(a),b.Sidebar._expose(),b.Sidebar.refreshOnClose=!0},submit:function(){var a=this,c=$("#sidebar-buyEVT-nameOnCard").val(),d=$("#sidebar-buyEVT-cSection1").val(),e=$("#sidebar-buyEVT-cSection2").val(),f=$("#sidebar-buyEVT-cSection3").val(),g=$("#sidebar-buyEVT-cSection4").val(),h=d+""+e+f+g,i=$("#sidebar-buyEVT-exp").val().split("/"),j=$("#sidebar-buyEVT-cvc").val(),k=$("#sidebar-buyEVT-quantity").val()||1;b.Sidebar._beginTransaction()&&Stripe.card.createToken({name:c,number:h,cvc:j,exp_month:i[0],exp_year:i[1]},function(c,d){if(d.error)return b.Sidebar._endTransaction(),void $("#sidebar-buyEVT-error").empty().html(d.error.message);var e=d.id,f="/d1/checkout";$.post(f,{stripeToken:e,saveCard:!1,amountAuthorized:a.ticketPrice*k,event_id:a.eventID,email:decodeURIComponent(b.utils.readCookie("email")),ticket_count:k},function(c){return b.Sidebar._endTransaction(),0===c.status?void a._renderSuccess():(console.log("?"),void $("#sidebar-buyEVT-error").empty().html(d.short_message))})})}},b.Sidebar.purchase_membership={membershipPrice:-1,display:function(){this._pre_process(),b.Sidebar._expose()},_pre_process:function(){var a=this;return email=decodeURIComponent(b.utils.readCookie("email")),null===email?void b.logout():-1==email.toLowerCase().indexOf("@usc.edu")?void b.Flash("Drats, you have to have an @usc.edu email<br/>to buy membership."):void(b.Sidebar._beginTransaction()&&$.get("/d1/membership",function(c){b.Sidebar._endTransaction(),0!==c.status&&(b.Flash("Bugger, looks like something is broken.<br/>Try again later"),b.Sidebar._hide()),a.membershipPrice=c.data.price,a._render(),b.Sidebar._expose()}))},_render:function(){var a=this,c="",d=b.Sidebar._renderBase(),e=(1.029*parseInt(a.membershipPrice,10)+.3).toFixed(2);c+="<div>",c+="<div id='sidebar-buyM-error' class='sidebar-error'>Current Membership Price: $"+e+"</div>",c+="<div class='sidebar-input-wrapper'>",c+="<label class='sidebar-label'>Name on card</label>",c+="<input id='sidebar-buyM-nameOnCard' class='sidebar-input' type='text' tabindex='1' />",c+="</div>",c+="<div class='sidebar-input-wrapper'>",c+="<label class='sidebar-label'>Card number</label>",c+="<div>",c+="<input id='sidebar-buyM-cSection1' class='sidebar-input sidebar-card' type='text' maxlength='4' tabindex='2' />",c+="<input id='sidebar-buyM-cSection2' class='sidebar-input sidebar-card' type='text' maxlength='4' tabindex='3' />",c+="<input id='sidebar-buyM-cSection3' class='sidebar-input sidebar-card' type='text' maxlength='4' tabindex='4' />",c+="<input id='sidebar-buyM-cSection4' class='sidebar-input sidebar-card' type='text' maxlength='4' tabindex='5' />",c+="<div class='clear'></div>",c+="</div>",c+="</div>",c+="<div>",c+="<div class='sidebar-input-wrapper sidebar-input-expcvc'>",c+="<label class='sidebar-label'>EXP <span class='sidebar-label-smaller'>(MM/YY)</span></label>",c+="<input id='sidebar-buyM-exp' class='sidebar-input' type='text' tabindex='6' />",c+="</div>",c+="<div class='sidebar-input-wrapper sidebar-input-expcvc'>",c+="<label class='sidebar-label'>CVC</label>",c+="<input id='sidebar-buyM-cvc' class='sidebar-input' tabindex='7' />",c+="</div>",c+="<div class='clear'></div>",c+="</div>",c+="<label class='sidebar-label'>Remember this card </label><input id='sidebar-buyM-rememberCard' type='checkbox'/>",c+="<div class='sidebar-button large-button' onclick='SCIA.Sidebar.purchase_membership.submit(this)'>Buy Membership</div>",c+="</div>",d.html(c)},_renderSuccess:function(){var a="",c=b.Sidebar._renderBase();a+="<div class='sidebar-error'>Welcome to the SCIA family!<br/>We'll be sending you an email shortly with your receipt.</div>",c.html(a),b.Sidebar._expose(),b.Sidebar.refreshOnClose=!0},submit:function(){var a=this,c=$("#sidebar-buyM-nameOnCard").val(),d=$("#sidebar-buyM-cSection1").val(),e=$("#sidebar-buyM-cSection2").val(),f=$("#sidebar-buyM-cSection3").val(),g=$("#sidebar-buyM-cSection4").val(),h=d+""+e+f+g,i=$("#sidebar-buyM-exp").val().split("/"),j=$("#sidebar-buyM-cvc").val(),k=$("#sidebar-buyM-rememberCard").is(":checked");b.Sidebar._beginTransaction()&&Stripe.card.createToken({name:c,number:h,cvc:j,exp_month:i[0],exp_year:i[1]},function(c,d){if(d.error)return b.Sidebar._endTransaction(),void $("#sidebar-buyM-error").empty().html(d.error.message);var e=d.id,f="/d1/user/"+b.utils.readCookie("id")+"/buyMembership";$.post(f,{stripeToken:e,saveCard:k,amountAuthorized:a.membershipPrice},function(c){return b.Sidebar._endTransaction(),0===c.status?void a._renderSuccess():(console.log("?"),void $("#sidebar-buyM-error").empty().html(d.short_message))})})}},b.Sidebar.register={display:function(){this._render(),b.Sidebar._expose()},_render:function(){var a="",c=b.Sidebar._renderBase();a+="<div>",a+="<div id='sidebar-register-error' class='sidebar-error'></div>",a+="<div class='sidebar-input-wrapper'>",a+="<label class='sidebar-label'>First Name</label>",a+="<input id='sidebar-register-fname' class='sidebar-input' type='text' tabindex='1' />",a+="</div>",a+="<div class='sidebar-input-wrapper'>",a+="<label class='sidebar-label'>Last Name</label>",a+="<input id='sidebar-register-lname' class='sidebar-input' type='text' tabindex='2' />",a+="</div>",a+="<div class='sidebar-input-wrapper'>",a+="<label class='sidebar-label'>Email <span class='sidebar-label-smaller'>(@usc.edu required for membership)</span></label>",a+="<input id='sidebar-register-email' class='sidebar-input' type='email' tabindex='3' />",a+="</div>",a+="<div class='sidebar-input-wrapper'>",a+="<label class='sidebar-label'>Password</label>",a+="<input id='sidebar-register-password' class='sidebar-input' type='password' tabindex='4' />",a+="</div>",a+="<div class='sidebar-input-wrapper'>",a+="<label class='sidebar-label'>Confirm Password</label>",a+="<input id='sidebar-register-password-conf' class='sidebar-input' type='password' tabindex='5' />",a+="</div>",a+="<div class='sidebar-button large-button' onclick='SCIA.Sidebar.register.submit(this)'>Register</div>",a+="</div>",c.html(a)},_renderSuccess:function(){var a="",c=b.Sidebar._renderBase();a+="<div class='sidebar-error'>Awesome, you're almost there!<br/>Check your email for further instructions</div>",c.html(a),b.Sidebar._expose()},submit:function(){var c=this,d=$("#sidebar-register-fname").val(),e=$("#sidebar-register-lname").val(),f=$("#sidebar-register-email").val(),g=$("#sidebar-register-password").val(),h=$("#sidebar-register-password-conf").val();return""===d||""===e||""===f||""===g||""===h?void $("#sidebar-register-error").empty().html("All fields are required"):-1==f.indexOf("@")?void $("#sidebar-register-error").empty().html("Invalid email"):g!=h?void $("#sidebar-register-error").empty().html("passwords don't match"):void(b.Sidebar._beginTransaction()&&$.post("/d1/user/create",{f_name:d,l_name:e,email:f,pwd:g,cb:a.location.origin+a.location.pathname},function(a){return b.Sidebar._endTransaction(),0===a.status?void c._renderSuccess():10001==a.status?void $("#sidebar-register-error").empty().html("This email is already registered.<br/><a class='sidebar-ui-link' href='javascript:SC.Sidebar.forgot_password.display()'>Forgot Password?</a>"):10501==a.status?void $("#sidebar-register-error").empty().html("UhOh, we messed something up.<br/>Try again later."):void $("#sidebar-register-error").empty().html(a.short_message)}))}},b.Sidebar.resend_verification_email={_submit:function(c){var d=this;b.Sidebar._beginTransaction()&&$.post("/d1/user/resendVerificationEmail",{email:c,cb:a.location.origin+a.location.pathname},function(a){return b.Sidebar._endTransaction(),0===a.status?void d._render("Awesome, you're almost there!<br/>Check your email for further instructions"):void d._render(a.short_message)})},_render:function(a){var c="",d=b.Sidebar._renderBase();c+="<div class='sidebar-error'>"+a+"</div>",d.html(c),b.Sidebar._expose()}},b.reset_password={id:"",token:"",display:function(a,c){this.id=a,this.token=c,this._render(),b.Sidebar._expose()},_render:function(){var a="",c=b.Sidebar._renderBase();a+="<div id='sidebar-reset-pwd'>",a+="<div id='sidebar-rstPwd-error' class='sidebar-error'></div>",a+="<div class='sidebar-input-wrapper'>",a+="<label class='sidebar-label'>New Password</label>",a+="<input id='sidebar-new-password' class='sidebar-input' type='password' tabindex='1' />",a+="</div>",a+="<div class='sidebar-input-wrapper'>",a+="<label class='sidebar-label'>Confirm Password</label>",a+="<input id='sidebar-new-password-conf' class='sidebar-input' type='password' tabindex='2' />",a+="</div>",a+="<div class='sidebar-button large-button' onclick='SCIA.Sidebar.reset_password.submit(this)'>Reset Password</div>",a+="</div>",c.html(a)},_renderSuccess:function(){var a="",c=b.Sidebar._renderBase();a+="<div class='sidebar-error'>Your password has been reset :-)</div>",c.html(a),b.Sidebar._expose()},submit:function(){var a=this,c=$("#sidebar-new-password").val(),d=$("#sidebar-new-password-conf").val(),e=a.id,f=a.token;return""===c?void $("#sidebar-rstPwd-error").empty().html("Invalid password"):c!=d?void $("#sidebar-rstPwd-error").empty().html("The passwords don't match"):void(b.Sidebar._beginTransaction()&&$.post("/d1/user/reset",{id:e,token:f,new_pwd:c},function(c){b.Sidebar._endTransaction(),0===c.status?a._renderSuccess():$("#sidebar-rstPwd-error").empty().html(c.short_message)}))}},b.ZuneView={zuneCards:[],init:function(a,d,e){function f(a){return String.fromCharCode(a.charCodeAt(0)+1)}function g(a,b,c){var d=document.createElement("div"),e=document.createElement("div"),f=document.createElement("div"),g=document.createElement("div"),i=document.createElement("img"),j=document.createElement("img"),l=a*k.width;d.className="flip-container",d.style.width=l,d.style.height=l,d.style.top=c,d.style.left=b,e.className="flipper",f.className="front",g.className="back",i.className="imgFront zuneImg",i.width=l-5,i.height=l-5,i.src=h.getRandomImg(),j.className="imgBack zuneImg",j.width=l-5,j.height=l-5,j.src=h.getRandomImg(),f.appendChild(i),g.appendChild(j),e.appendChild(f),e.appendChild(g),d.appendChild(e);var m=new h.ZuneCard(d,i,j);return h.zuneCards.push(m),d}var h=this,i=document.getElementById(d),j={width:i.clientWidth,height:i.clientHeight},k={width:j.height/a.height,height:j.height/a.height},l="A",m=0,n=0,o=null;a.width=Math.floor(j.width/k.width);var p=0,q=new Array(a.width);for(c=0;c<a.width;c++)q[c]=new Array(a.height);var s=!0;for(document.getElementById(e).style.width=a.width*k.width+"px",b.utils.writeToLocalStorage("pageWidth",a.width*k.width),r=0;r<a.height;r++)for(c=0;c<a.width;c++)if(void 0===q[c][r]){var t=Math.floor(4*Math.random())+2,u=c,v=r,w=0;for(s&&(t=2);t>w&&u<a.width&&void 0===q[u][r]&&v<a.height;)w++,u++,v++;for(u=c;c+w>u;u++)for(v=r;r+w>v;v++)q[u][v]=l;if(m=c*k.width+p,n=r*k.height,o=new g(w,m,n),s){var x=h.zuneCards[0];x.imgFront.src="../assets/images/logo.png",x.imgBack.src="../assets/images/logo.png",h.zuneCards=[],s=!1}i.appendChild(o),l=f(l)}setInterval(function(){h.updateZuneImgs()},5e3)},getRandomImg:function(){var a=Math.floor(47*Math.random());return"../assets/images/"+a+".jpg"},updateZuneImgs:function(){var a=Math.floor(Math.random()*this.zuneCards.length),b=this.zuneCards[a],c=this;b.frontVisible?b.imgBack.src=c.getRandomImg():b.imgFront.src=c.getRandomImg(),b.frontVisible=!b.frontVisible,b.flipContainer.classList.toggle("flip")},ZuneCard:function(a,b,c){return{flipContainer:a,imgFront:b,imgBack:c,frontVisible:!0}}},b.navigation={init:function(){if(null!==b.utils.readCookie("id")){var c=b.utils.readCookie("f_name")+" "+b.utils.readCookie("l_name"),d=decodeURIComponent(b.utils.readCookie("email"));$("#nav-personal > span").html(c),$("#nav-register").remove(),$("#nav-login").remove(),-1==d.toLowerCase().indexOf("@usc.edu")&&$("#nav-buy-membership").remove(),"true"==b.utils.readCookie("is_member")&&$("#nav-buy-membership").remove()}else $("#nav-personal").remove();$("#navigation").animate({opacity:1},0,function(){});var e=a.location.pathname;console.log(e),e.indexOf("/about/")>-1?$("#nav-about > a").css("color","rgb(204,40,40)"):e.indexOf("/events/")>-1?$("#nav-events > a").css("color","rgb(204,40,40)"):console.log("do nothing")}},b.parallax={parallaxTiles:null,busy:!1,rate:.5,init:function(b,c){var d=this,e=document.getElementsByClassName(c);this.rate=1>=b&&b>0?b:.5,this.parallaxTiles=[e.length];for(var f=0;f<e.length;f++)this.parallaxTiles[f]=this.ParallaxTile(e[f]);$(a).scroll(function(){d.requestFrameUpdate()})},requestFrameUpdate:function(){var a=this;this.busy||(requestAnimationFrame(function(){a.updateParallax()}),this.busy=!0)},updateParallax:function(){for(var a=0;a<this.parallaxTiles.length;a++)this.parallaxTiles[a].render();this.busy=!1},ParallaxTile:function(b){var c=function(c){this.parallaxDOMElement=b,this.offset=new c.Offset(this.parallaxDOMElement);var d=Math.floor(c.rate*a.innerHeight);this.render=function(){if(this.offset.update(),this.offset.visible){var a=d+c.rate*this.offset.edgeTopOffset;$(this.parallaxDOMElement).css("background-position-y",a)}}},d=new c(this);return d.render(),d},Offset:function(b){if(null===b)return null;var c=$(b).height(),d=$(b).offset().top,e=d+c;return this.scrollOffset=0,this.edgeTopOffset=0,this.edgeBottomOffset=0,this.visible=!1,this.update=function(){var b=$(a).scrollTop();this.scrollOffset=d-b,this.edgeTopOffset=d-(b+a.innerHeight),this.edgeBottomOffset=e-b,this.visible=this.edgeTopOffset<0&&this.edgeBottomOffset>0},this}},b.utils={keys:[37,38,39,40],preventDefault:function(b){b=b||a.event,b.preventDefault&&b.preventDefault(),b.returnValue=!1},keydown:function(a){for(var c=b.utils,d=c.keys,e=d.length;e--;)if(a.keyCode===d[e])return void c.preventDefault(a)},wheel:function(a){var c=b.utils;c.preventDefault(a)},disable_scroll:function(){var c=(b.utils,this.wheel),d=this.keydown;a.addEventListener&&a.addEventListener("DOMMouseScroll",c,!1),a.onmousewheel=document.onmousewheel=c,document.onkeydown=d},enable_scroll:function(){var c=(b.utils,this.wheel);a.removeEventListener&&a.removeEventListener("DOMMouseScroll",c,!1),a.onmousewheel=document.onmousewheel=document.onkeydown=null},getWindowSize:function(){return{width:a.innerWidth,height:a.innerHeight}},getGCD:function(a,b){for(var c=-1,d=0,e=0;0!==c;)d=a>b?a:b,e=a>b?b:a,c=d%e,a>b?a=c:b=c;return e},parseURL:function(a){var b=document.createElement("a");return b.href=a,b},parseQueryString:function(){for(var b,c=/\+/g,d=/([^&=]+)=?([^&]*)/g,e=function(a){return decodeURIComponent(a.replace(c," "))},f=a.location.search.substring(1),g={},h=0;30>h&&(b=d.exec(f),null!==b);)g[e(b[1])]=e(b[2]),h++;return g},readCookie:function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b))return e.substring(b.length,e.length)}return null},writeToLocalStorage:function(a,b){return"undefined"==typeof localStorage||null===a||null===b?null:void localStorage.setItem(a,b)},readFromLocalStorage:function(a){return"undefined"==typeof localStorage||null===a?null:localStorage.getItem(a)},getFriendlyDateTime:function(a){var b=new Date,c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d=["January","February","March","April","May","June","July","August","September","October","November","December"],e=new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0,0),f=new Date(b.getFullYear(),b.getMonth(),b.getDate()+1,0,0,0,0),g=new Date(b.getFullYear(),b.getMonth(),b.getDate()+2,0,0,0,0),h="";h=a>e&&f>=a?"Today, ":a>f&&g>=a?"Tomorrow, ":c[a.getDay()]+", ",h+=d[a.getMonth()]+" "+a.getDate()+", "+a.getFullYear();var i="",j=null,k=null;return a.getHours()<12?(j=a.getHours(),k=a.getMinutes()/10>1?a.getMinutes():"0"+a.getMinutes(),i=j+":"+k+"am"):(j=a.getHours()-12,k=a.getMinutes()/10>1?a.getMinutes():"0"+a.getMinutes(),i=j+":"+k+"pm"),{event_date:h,event_time:i}}},"object"==typeof a&&(a.SCIA=a.SC=b)}(window);