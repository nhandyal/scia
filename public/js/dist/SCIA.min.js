/*! SCIA 2014-03-30 */
function openProfileOpts(){$("div#profile-detail").is(":visible")?closeProfileOpts():$("div#profile-detail").slideDown(65)}function closeProfileOpts(){$("div#profile-detail").slideUp(65)}function screenLock(){$("#modal-overlay").show(),$("#modal-container").show(),$("#modal-processing").show(),$("html,body").animate({scrollTop:0},"slow"),setTimeout(function(){$("#modal-processing").is(":visible")&&(screenUnlock(),alert("Unable to complete action."))},6e4)}function screenUnlock(){$("#modal-overlay").hide(),$("#modal-container").hide(),$("#modal-processing").hide()}function svc(a,b,c){$.support.cors=!0,$.ajax({url:a,data:JSON.stringify(b),dataType:"json",type:"POST",contentType:"application/json",success:function(a){null!=a?c(a):alert("Error with null data")},error:function(a,b,c){svcError(a,b,c)}})}function svcStart(a,b){b?$("div#modal-loading").fadeIn(250):$("div#header-loading").fadeIn(250)}function svcError(a,b,c){$(function(){alert("Status : "+a.status+"\nthrownError : "+c)})}function logout(){svc("/d1/user/logout",{},function(){location.reload()})}function endsWith(a,b){return-1!==a.indexOf(b,a.length-b.length)}function buildDropdown(a,b,c,d){return $span=$(document.createElement("span")).addClass("dropdown"),$menu=$(document.createElement("select")).attr({id:a,name:a}),$.each(b,function(a,b){void 0==b&&(b=""),$option=$(document.createElement("option")).text(b),$option.val(d?a:b),c&&c==b&&$option.attr({selected:"selected"}),$menu.append($option)}),$span.append($menu)}function switchScreen(a,b){scope=b?"div#modal":"div#content",$("div.sub-content",scope).hide(),$("div.screen-"+a,scope).show(),$("div#bond-subheader span",scope).removeClass("current"),$("div#bond-subheader span.screen-"+a,scope).addClass("current")}function forceArray(a){if(null===a)return[];switch(typeof a){case"number":case"string":case"boolean":return[a];case"object":return a;case"undefined":return[]}}!function(a){var b={};b.head=document.getElementsByTagName("head")[0],b.ZuneView={zuneCards:[],init:function(a,b){function d(a){return String.fromCharCode(a.charCodeAt(0)+1)}function e(a,b,c){var d=document.createElement("div"),e=document.createElement("div"),g=document.createElement("div"),h=document.createElement("div"),j=document.createElement("img"),k=document.createElement("img"),l=a*i.width;d.className="flip-container",d.style.width=l,d.style.height=l,d.style.top=c,d.style.left=b,console.log(b),e.className="flipper",g.className="front",h.className="back",j.className="imgFront zuneImg",j.width=l-5,j.height=l-5,j.src=f.getRandomImg(),k.className="imgBack zuneImg",k.width=l-5,k.height=l-5,k.src=f.getRandomImg(),g.appendChild(j),h.appendChild(k),e.appendChild(g),e.appendChild(h),d.appendChild(e);var m=new f.ZuneCard(d,j,k);return f.zuneCards.push(m),d}var f=this,g=document.getElementById(b),h={width:g.clientWidth,height:g.clientHeight},i={width:h.height/a.height,height:h.height/a.height},j="A",k=0,l=0,m=null;a.width=Math.floor(h.width/i.width),console.log("vpt: "+a.width+" vp: "+h.width+"  t: "+i.width);var n=new Array(a.width);for(c=0;c<a.width;c++)n[c]=new Array(a.height);var o=!0;for(r=0;r<a.height;r++)for(c=0;c<a.width;c++)if(void 0===n[c][r]){var p=Math.floor(4*Math.random())+2,q=c,s=r,t=0;for(o&&(p=2);p>t&&q<a.width&&void 0===n[q][r]&&s<a.height;)t++,q++,s++;for(q=c;c+t>q;q++)for(s=r;r+t>s;s++)n[q][s]=j;if(k=c*i.width,l=r*i.height,m=new e(t,k,l),o){var u=f.zuneCards[0];u.imgFront.src="../assets/images/logo.png",u.imgBack.src="../assets/images/logo.png",f.zuneCards=[],o=!1}g.appendChild(m),j=d(j)}setInterval(function(){f.updateZuneImgs()},2500)},getRandomImg:function(){var a=Math.floor(47*Math.random());return"../assets/images/"+a+".jpg"},updateZuneImgs:function(){var a=Math.floor(Math.random()*this.zuneCards.length),b=this.zuneCards[a],c=this;b.frontVisible?b.imgBack.src=c.getRandomImg():b.imgFront.src=c.getRandomImg(),b.frontVisible=!b.frontVisible,b.flipContainer.classList.toggle("flip")},ZuneCard:function(a,b,c){return{flipContainer:a,imgFront:b,imgBack:c,frontVisible:!0}}},b.utils={getWindowSize:function(){return{width:a.innerWidth,height:a.innerHeight}},getGCD:function(a,b){for(var c=-1,d=0,e=0;0!==c;)d=a>b?a:b,e=a>b?b:a,c=d%e,a>b?a=c:b=c;return e}},"object"==typeof a&&(a.SCIA=a.SC=b)}(window);var svcRunning=[],html,table,tdArr,checkbox,label,detailLink,popWidth=null,popHeight=null,goToScreen;$(function(){$("div#profile-detail").click(function(a){a.stopPropagation()}),$("html").click(function(){closeProfileOpts()}),$.cookie("card_id")?($("a#navigation-register").hide(),$("a#navigation-login").hide(),$("a#navigation-profile").show(),1==$.cookie("pay_membership_flag")?$("a#navigation-pay-membership").show():$("a#navigation-pay-membership").hide(),$("span#profile-f-name").html($.cookie("f_name")),$("span#profile-l-name").html($.cookie("l_name"))):($("a#navigation-register").show(),$("a#navigation-login").show(),$("a#navigation-profile").hide()),$("span.checkbox").each(function(){$input=$(this).children('input[type="hidden"]'),1==$input.val()&&$(this).addClass("checked")}),$("span.checkbox").click(function(){$input=$(this).children('input[type="hidden"]'),1==$input.val()?($input.val(0),$(this).removeClass("checked")):($input.val(1),$(this).addClass("checked"))});var a=$.uaMatch(navigator.userAgent).browser,b=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;if("webkit"==a&&!b){var c,d=5;$("span.dropdown").css({padding:"2px 0 2px "+d+"px"}).each(function(){c=$(this).css("width"),c=c.replace(/[^0-9]/g,""),c=parseInt(c)-d,$(this).css({width:c+"px"})})}Array.prototype.indexOf||(Array.prototype.indexOf=function(a){"use strict";if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>1&&(d=Number(arguments[1]),d!=d?d=0:0!=d&&1/0!=d&&d!=-1/0&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);c>e;e++)if(e in b&&b[e]===a)return e;return-1}),$("textarea[maxlength]").bind("keyup input paste",function(){var a=parseInt($(this).attr("maxlength")),b=$(this).val(),c=b.length;if(c>a){var d=b.substr(0,a);$(this).val(d)}}),$("label.checkbox").keydown(function(a){if(32==a.which){a.preventDefault();var b=$(this).attr("for"),c=$(this).children("span.checkbox"),d=$('input[id="'+b+'"]');b&&c&&d&&c.trigger("click")}}),$("label.radio").focus(function(){var a=$(this).attr("for"),b=$('input[id="'+a+'"]'),c=b.attr("name"),d=$('input[name="'+c+'"]:radio:checked');if(d){var e=$('label[for="'+d.attr("id")+'"]');a!=d.attr("id")&&e.focus()}}),$("label.radio").keydown(function(a){if(a.shiftKey&&9==a.which||9==a.which||32==a.which||37==a.which||38==a.which||39==a.which||40==a.which){a.preventDefault();var b=$(this).attr("for"),c=parseInt($(this).attr("tabindex"),10),d=$("input[id="+b+"]"),e=d.attr("name"),f=parseInt($('input[name$="'+e+'"]+label').first().attr("tabindex"),10),g=parseInt($('input[name$="'+e+'"]+label').last().attr("tabindex"),10);if(32==a.which)b&&d&&d.trigger("click");else if(a.shiftKey&&9==a.which){for(var h=0,i=f-1;!$("[tabindex="+i+"]").is(":visible")&&10>h;)i--,h++;$("[tabindex="+i+"]").focus()}else if(9==a.which){for(var h=0,j=g+1;!$("[tabindex="+j+"]").is(":visible")&&10>h;)j++,h++;$("[tabindex="+j+"]").focus()}else if(37==a.which||38==a.which){var k=c-1;f>k&&(k=g);var l=$("[tabindex="+k+"]"),m=$('input[id="'+l.attr("for")+'"]');l&&m&&(l.focus(),m.trigger("click"))}else if(39==a.which||40==a.which){var n=c+1;n>g&&(n=f);var o=$("[tabindex="+n+"]"),p=$('input[id="'+o.attr("for")+'"]');o&&p&&(o.focus(),p.trigger("click"))}}})});var field={required:function(a){return a?!1:"Field required"},error:function(a,b){0==$(a.label).children("span.error").length&&$(a.label).append('<span class="error">'+b+"</span>")},check:function(a){id=$(a).attr("id"),name=$(a).attr("name"),type=$(a).get(0).tagName.toLowerCase(),"input"==type&&(type=$(a).attr("type")),"radio"==type?(filter=name,label="div#radio-"+name.replace("[","").replace("]",""),val=$('input[name="'+name+'"]:checked').val(),void 0==val&&(val="")):"checkbox"==type?(filter=name,label="div#checkbox-"+name,val=$('input[name="'+name+'"]:checked').val(),void 0==val&&(val="")):(filter=id,label='label[for="'+id+'"]',val=$(a).val()),"textarea"==type&&val&&(val=val.replace(/\n/g,"<br />")),$(label).find("span.error").remove(),verify({el:a,type:type,id:id,name:name,filter:filter,label:label,val:val})}};field.checkAll=function(a){return void 0==a&&(a="form"),$(a).find("input,select,textarea").each(function(){field.check(this)}),0==$("span.error",a).length},field.pass=function(a,b,c,d){var e=!1;return void 0==b&&(b=!0),b&&(e=field.required(a.val)),c&&!e&&(e=validate[c](a.val,d)),e?void field.error(a,e):c&&a.val&&"match"!=c?(formatted=format[c](a.val),$(a.el).val(formatted),formatted):a.val};var validate={alpha:function(a){return a?(invalid=a.match(/[^a-z\s]/gi),invalid?"Alphabets only":!1):!1},alphanumeric:function(a){return a?(invalid=a.match(/[^a-z0-9\s]/gim),invalid?"Alphanumeric only":!1):!1},numeric:function(a){return a?(a=a.toString().replace(/[^0-9]/g,""),a?!1:"Number must be numeric"):!1},percent:function(a){return a?(a=a.toString().replace(/[^0-9]/g,""),a?!1:"Percentage must be numeric"):!1},money:function(a){return a?(a=a.toString().replace(/[^0-9.]/g,""),a?!1:"Value must be numeric"):!1},phone:function(a){return a?(a=a.toString().replace(/[^0-9]/g,""),a?10!=a.length?"Must be a 10 digit number":!1:"Number must be numeric"):!1},email:function(a){return a?(valid=a.match(/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/i),valid?!1:"Invalid email address"):!1},uscemail:function(a){return a?(valid=a.match(/^[a-z0-9._%+-]+@usc\.edu/i),valid?!1:"Invalid USC email address"):!1},creditcard:function(a){return a?(a=a.toString().replace(/[^0-9]/g,""),a?a.length<13||16<a.length?"Invalid length":!1:"Numeric only"):!1},csc:function(a){return a?(a=a.toString().replace(/[^0-9]/g,""),a?a.length<3||4<a.length?"Invalid length":!1:"Numeric only"):!1},zip:function(a){return a?(a=a.toString().replace(/[^0-9]/g,""),a?5!=a.length&&9!=a.length?"Invalid length":!1:"Numeric only"):!1},date:function(a){return a?(ts=format.timestamp(a),isNaN(ts)?"Please enter a valid date":!1):!1},match:function(a,b){return a!==b?"Verification must match":!1},password:function(a){return a?(a=a.toString().replace(" ",""),a&&(a.length<6||a.length>15)?"Must be 6 to 15 characters":!1):!1}},format={name:function(a){if(a){var b="";return a.FirstName&&(b+=a.FirstName),a.MiddleName&&(b+=" "+a.MiddleName),a.LastName&&(b+=" "+a.LastName),a.Suffix&&(b+=", "+a.Suffix),b}},address:function(a){if(a){var b="";return a.Address_1&&(b+=a.Address_1),a.Address_1&&a.Address_2&&(b+="<br />"),a.Address_2&&(b+=a.Address_2),(a.Address_1||a.Address_2)&&(b+="<br />"),a.City&&(b+=a.City),a.City&&a.State&&(b+=", "),a.State&&(b+=a.State),(a.City||a.State)&&(b+=" "),a.Zip&&(b+=a.Zip),b}},alpha:function(a){return a.toString()},alphanumeric:function(a){return a.toString()},numeric:function(a){return a.toString().replace(/[^0-9]/g,"")},percent:function(a){return a&&(a=a.toString().replace(/[^0-9]/g,""))?a+"%":void 0},money:function(a,b){if(a=a.toString().replace(/[^0-9.]/g,"")){if(void 0==b)var b=2;var c=0>a?"-":"",d=parseInt(a=Math.abs(+a||0).toFixed(b))+"",e=(e=d.length)>3?e%3:0;return"$"+c+(e?d.substr(0,e)+",":"")+d.substr(e).replace(/(\d{3})(?=\d)/g,"$1,")+(b?"."+Math.abs(a-d).toFixed(b).slice(2):"")}},phone:function(a){return a&&(a=a.toString().replace(/[^0-9]/g,""))?"("+a.slice(0,3)+") "+a.slice(3,6)+"-"+a.slice(6,10):void 0},email:function(a){return a.toLowerCase()},uscemail:function(a){return a.toLowerCase()},creditcard:function(a){return a.toString().replace(/[^0-9]/g,"")},csc:function(a){return a.toString().replace(/[^0-9]/g,"")},ssn:function(a){return a&&(a=a.toString().replace(/[^0-9]/g,""))?a.slice(0,3)+"-"+a.slice(3,5)+"-"+a.slice(5,9):void 0},zip:function(a){return a?(a=a.toString().replace(/[^0-9]/g,""),5==a.length?a:a.slice(0,5)+"-"+a.slice(5,9)):void 0},date:function(a){return a?(ts=new Date(1e3*format.timestamp(a)),month=ts.getMonth()+1,month=10>month?"0"+month:""+month,day=ts.getDate(),day=10>day?"0"+day:""+day,year=ts.getFullYear(),month+"/"+day+"/"+year):void 0},time:function(a){return a?(ts=new Date(1e3*format.timestamp(a)),hours=ts.getHours(),hours>=12?(tod="PM",hours-=12):tod="AM",0==hours&&(hours=12),hours=10>hours?"0"+hours:""+hours,minutes=ts.getMinutes(),minutes=10>minutes?"0"+minutes:""+minutes,hours+":"+minutes+" "+tod):void 0},username:function(a){return a.toLowerCase()},password:function(a){return a}};format.timestamp=function(a){return a?Date.parse(a)/1e3:void 0},format.timeElapsed=function(a){return a?(elapsed=now-a,elapsed>=31536e3?(span=Math.floor(elapsed/31536e3),display=span+" Year"):elapsed>=86400?(span=Math.floor(elapsed/86400),display=span+" Day"):elapsed>=3600?(span=Math.floor(elapsed/3600),display=span+" Hour"):elapsed>=60?(span=Math.floor(elapsed/60),display=span+" Minute"):(span=elapsed,display=span+" Second"),span>1&&(display+="s"),display):void 0};var modal={open:function(a,b,c,d,e){if(b||(b={}),e||(e=function(){}),$.browser.webkit)var f=$("body").scrollTop();else var f=$("html").scrollTop();return $("#modal-container").css({top:f+45+"px"}),$("#modal-overlay").fadeIn(300,function(){$("#modal-container").fadeIn(200,function(){$.ajax({type:"GET",url:a,data:b,dataType:"html",success:function(a){$("#modal-content").html(a),(!c||isNaN(c)||1>c)&&(c=774),(!d||isNaN(d)||1>d)&&(d=$("#modal-content").height());var b={width:c+"px",height:d+"px"};$("#modal").animate(b,400,function(){$("#modal-loading").fadeOut(150,function(){$("#modal-content").fadeIn(200,function(){e()})})})},error:function(a,b,c){alert("Error executing: "+a+"/"+b+"/"+c)}})})}),!1},close:function(a){$("#modal-overlay").hide(),$("#modal-container").hide(),$("#modal-content").hide().html(""),$("#modal-loading").show(),$("#modal").css({width:"500px",height:"275px"}),a&&a()}};modal.registration=function(){modal.open("modal/registration.html",{},768,352)},modal.editProfile=function(){modal.open("modal/edit-profile.html",{},768,294)},modal.login=function(){modal.open("modal/login.html",{},396,236)},modal.payMembership=function(){modal.open("modal/pay-membership.html",{},396,324)},modal.addTickets=function(a){modal.open("modal/add-tickets.html?eventID="+a,{},396,464)};